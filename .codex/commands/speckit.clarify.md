---
description: 通过提出最多5个高度针对性的澄清问题，并将其答案编码回规格书中，来识别当前功能规格书中的不明确之处。
scripts:
   sh: .specify/scripts/bash/check-prerequisites.sh --json --paths-only
   ps: .specify/scripts/powershell/check-prerequisites.ps1 -Json -PathsOnly
---

## 用户输入

```text
$ARGUMENTS
```

## 概述

**目标**: 检测并减少活动功能规格书中的模糊性或缺失的决策点，并将澄清内容直接记录到规格文件中。

**执行步骤**:

1.  **运行 `.specify/scripts/bash/check-prerequisites.sh --json --paths-only`** 并解析 JSON 负载以获取 `FEATURE_SPEC` 路径。
2.  **加载当前的规格文件**。对功能范围、数据模型、交互流程、非功能性需求和边缘情况等进行结构化扫描。
3.  **生成最多5个候选澄清问题**。每个问题都必须可以通过简短的多项选择或短语回答。
4.  **顺序提问循环 (交互式)**:
    -   一次只提出一个问题。
    -   对于多项选择题，提供一个**推荐选项**并说明理由。
    -   等待用户回答。
5.  **整合答案**:
    -   在规格书中创建一个 `## 澄清` 部分（如果不存在）。
    -   在 `### 会话 YYYY-MM-DD` 小标题下记录问答。
    -   立即将澄清内容应用到规格书中最相关的部分。
    -   每次整合后保存规格文件。
6.  **报告完成情况**:
    -   报告提问和回答的数量。
    -   指出更新后的规格文件路径。
    -   建议下一步命令，例如 `/speckit.plan`。

**行为规则**:

-   如果未发现有意义的模糊之处，则报告“未检测到值得正式澄清的关键模糊点”并建议继续。
-   如果规格文件丢失，则指示用户首先运行 `/speckit.specify`。
-   总提问数不超过5个。
-   尊重用户的提前终止信号 ("停止", "完成")。
